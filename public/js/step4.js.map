{"version":3,"sources":["step4.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"step4.js","sourcesContent":["$(document).ready(function () {\n\n    var countWords = function (string) {\n        return string\n            .replace(/(^\\s*)|(\\s*$)/gi, \"\")\n            .replace(/\\s+/gi, \" \")\n            .split(' ').length;\n    };\n\n    var updateCount = function (el, expected) {\n\n        if($(el).val().length == 0) return expected;\n\n        var nb = expected - countWords($(el).val());\n\n        if (nb > 0) {\n            $(\"#\" + $(el).attr('id') + \"-text\").removeClass('no-display');\n            $(\"#\" + $(el).attr('id') + \"-count\").text(nb);\n\n        }\n        if (nb <= 0) {\n            $(\"#\" + $(el).attr('id') + \"-count\").text('');\n            $(\"#\" + $(el).attr('id') + \"-text\").addClass('no-display');\n        }\n        return nb;\n    };\n\n    var count30 = function (el) {\n\n        return updateCount(el, 30);\n    };\n\n    var smFormControl = $(\".sm-form-control\");\n\n    smFormControl.each(function(){count30(this)});\n\n    smFormControl.on(\"keypress change\", (function () {\n        count30(this);\n    }));\n\n    window.Parsley\n        .addValidator('minimumwords', {\n            requirementType: 'string',\n            validateString: function (value, requirement) {\n                return countWords(value) >= requirement;\n            },\n            messages: {\n                en: 'Veuillez entrer au minimum %s mots dans cette section'\n            }\n        });\n\n    $('#presentation-content').parsley()\n        .on('field:validated', function () {\n\n            var ok = $('.parsley-error').length === 0;\n\n            $('.bs-callout-warning').toggleClass('hidden', ok);\n        })\n        .on('form:submit', function () {\n            return true;\n        });\n});\n"]}