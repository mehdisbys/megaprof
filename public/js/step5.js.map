{"version":3,"sources":["step5.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"step5.js","sourcesContent":["$(document).ready(function() {\n\n    var updatePrices = function(inputs, price) {\n        inputs.forEach(function(el){\n            return updateField(el,minus_percentage,price);\n        });\n    };\n\n    var updatePriceTravel = function(price){\n        var supp = checkInt($(\"#price_travel_percentage\").val());\n        $(\"#price_travel_span\").text(parseInt(supp) + price);\n        $(\"#price_travel\").val(parseInt(supp) + price);\n    };\n\n    var listenFields = function(fields){\n\n        fields.forEach(listenField);\n\n        $(\"#price_travel_percentage\").on('change keyup', function(){\n            updatePriceTravel(parseInt(getBasicPrice()));\n        });\n    };\n\n    var listenField = function (field){\n\n        $(field + \"_percentage\").on('change keyup',function(){\n            price = getBasicPrice();\n            updateField(field, minus_percentage, price);\n        });\n    };\n\n    var updateField = function( el, func, price){\n        var percent = checkInt($(el + \"_percentage\").val());\n        percent = percent ? percent : 0;\n        var times = el.split('_')[1];\n        if(checkInt(times) == false) times = 1 ;\n\n        $(el + \"_span\").text(Math.floor(func(price, percent) * times));\n        $(el + \"_total\").text(Math.floor(func(price, percent) * times));\n        $(el).val(Math.floor(func(price, percent) * times));\n    };\n\n    var getBasicPrice = function(){return checkInt($(\"#price\").val())};\n\n    var minus_percentage = function (value, percentage){\n        localPercentage =  (value - ((value * percentage)/100));\n        return Math.floor(localPercentage);\n    };\n\n    function checkInt(value) {\n        var x = parseFloat(value);\n        if(!isNaN(value) && (x | 0) === x)\n            return value;\n        return 0;\n    }\n\n    var toggleDisplays = function(inputs){\n\n        inputs.forEach(toggleDisplay);\n    };\n\n    var toggleDisplay = function(el){\n\n        $(el).on('change', function(){\n            if($(el).prop('checked'))\n                $(el + \"_display\").removeClass('no-visibility');\n            else\n                $(el + \"_display\").addClass('no-visibility');\n        });\n    };\n\n    //--------\n\n    var inputs = [\"#price_webcam\", \"#price_5_hours\", \"#price_10_hours\"];\n\n    var __process = function(){\n        var price = checkInt($(this).val());\n        updatePrices(inputs, price);\n        updatePriceTravel(parseInt(price));\n    };\n\n    $(\"#price\").on('change keyup load', __process);\n\n    $(\"#price\").trigger('change');\n\n    listenFields(inputs);\n\n    toggleDisplays([\"#price_travel_supp\",\"#price_webcam_bool\",\"#price_degressive\"]);\n\n    $('#price').parsley()\n        .on('field:validated', function () {\n\n            var ok = $('.parsley-error').length === 0;\n\n            $('.bs-callout-warning').toggleClass('hidden', ok);\n        })\n        .on('form:submit', function () {\n            return true;\n        });\n});\n"]}